# Plan: AJU E&J 전체 프로젝트 현황 및 로드맵

- **Feature**: v4-project-roadmap
- **Date**: 2026-02-17
- **목적**: 지금까지 완료된 것 정리 + 남은 작업 우선순위 도출

---

## 1. 지금까지 완료된 기능 ✅

### 핵심 관리 시스템
| 기능 | 경로 | 상태 |
|------|------|------|
| 대시보드 (통계, 비자 알림, 승인 대기) | `/` | ✅ 완료 |
| 학생 목록 (검색/필터/Excel 내보내기) | `/students` | ✅ 완료 |
| 학생 상세 (기본정보/상담/성적/동의) | `/students/[id]` | ✅ 완료 |
| 학생 등록 (관리자용) | `/students/new` | ✅ 완료 |
| 학생 수정 | `/students/[id]/edit` | ✅ 완료 |
| 학생 소프트 삭제 | 상세 페이지 버튼 | ✅ 완료 |
| 학생 Excel 대량 가져오기 | `/students/import` | ✅ 완료 |
| 유학원 관리 (CRUD) | `/agencies` | ✅ 완료 |
| 통계/리포트 | `/reports` | ✅ 완료 |
| 프로필 사진 업로드 | 상세 페이지 | ✅ 완료 |
| 상담 기록 CRUD | 상세 탭 | ✅ 완료 |
| 시험 성적 CRUD + TOPIK 자동계산 | 상세 탭 | ✅ 완료 |
| 개인정보 동의 이력 조회 | 상세 탭 | ✅ 완료 |

### 인증 / 학생 포털
| 기능 | 경로 | 상태 |
|------|------|------|
| 로그인 (역할별 리다이렉트) | `/login` | ✅ 완료 |
| 학생 자기 등록 신청 + 개인정보 동의 | `/register` | ✅ 완료 |
| 관리자 승인 워크플로우 | 대시보드 | ✅ 완료 |
| 학생 포털 (내 정보 조회) | `/portal` | ✅ 완료 |
| 학생 포털 자기정보 수정 (연락처/비자/주소) | `/portal` | ✅ 완료 |
| 개인정보 동의 이력 (포털 본인 조회) | `/portal` | ✅ 완료 |
| 비밀번호 찾기/재설정 | `/auth/reset-password-*` | ✅ 완료 |

### 보안 (v3)
| 기능 | 상태 |
|------|------|
| students RLS (master/agency/student 3계층) | ✅ 완료 |
| consultations RLS | ✅ 완료 |
| exam_results RLS | ✅ 완료 |
| storage 권한 제한 | ✅ 완료 |
| 역할별 URL 직접 접근 차단 | ✅ 완료 |
| 서비스 역할 키 서버사이드 전용 | ✅ 완료 |

---

## 2. 미완성 / 필요한 기능 분류

### 🔴 높은 우선순위 (사용성에 직접 영향)

#### A. 학생 포털 — 상담/성적 조회 기능 없음
- **현재**: 포털에 연락처, 비자, 주소만 표시
- **필요**: 본인 상담기록 + 시험성적 조회 탭 추가
- **이유**: RLS는 이미 student 읽기 허용 — UI만 없음
- **작업량**: 소 (1~2시간)

#### B. 포털 내 비밀번호 변경
- **현재**: 이메일로 재설정만 가능 (로그인 안 된 상태)
- **필요**: 로그인 상태에서 비밀번호 변경 (`supabase.auth.updateUser`)
- **이유**: 편의성 — 학생이 로그인 중에 변경 가능해야 함
- **작업량**: 소

#### C. 비자 만료 이메일 알림 (이전 Phase 3, 보류됨)
- **현재**: 대시보드/포털에서 D-day 표시만 됨
- **필요**: D-90, D-30, D-7 자동 이메일 발송
- **방법**: Vercel Cron Job + Supabase Edge Function + Resend/SendGrid
- **이유**: 핵심 서비스 가치 — 비자 만료 방지
- **작업량**: 중

#### D. 포털 다국어 (베트남어)
- **현재**: 포털 전체 한국어
- **필요**: 베트남어 UI (학생 대상)
- **이유**: 대상 사용자가 베트남인 — 한국어 이해 어려움
- **작업량**: 중

### 🟡 중간 우선순위 (운영 효율)

#### E. 학생 대량 승인
- **현재**: 대시보드에서 한 명씩 승인
- **필요**: 체크박스 선택 → 일괄 승인
- **작업량**: 소

#### F. 학생 포털 — 사진 업로드
- **현재**: 관리자만 사진 업로드 가능
- **필요**: 학생이 포털에서 직접 프로필 사진 등록
- **작업량**: 소 (코드 재사용 가능)

#### G. 유학원 로그인 화면 개선
- **현재**: 유학원 로그인 후 전체 학생 목록 표시 (agency 필터 자동)
- **확인 필요**: 유학원에게 보여주면 안 되는 정보 검토
- **필요**: 유학원 전용 대시보드 or 제한 뷰
- **작업량**: 소~중

#### H. 학생 계정 탈퇴/삭제 기능
- **현재**: 관리자만 소프트 삭제 가능
- **필요**: 학생 본인이 포털에서 탈퇴 요청 가능
- **방법**: 탈퇴 요청 → 관리자가 최종 승인
- **작업량**: 소

### 🟢 낮은 우선순위 (추후 검토)

#### I. 알림/공지사항 시스템
- 관리자가 공지 작성 → 학생 포털에 표시

#### J. 문서 관리
- 비자 서류, 입학 서류 등 파일 첨부 기능

#### K. 모바일 최적화 검토
- 현재 Tailwind 반응형 적용됨
- 실기기 테스트 필요

#### L. 휴면 계정 관리
- 1년 이상 미접속 → 휴면 안내
- 개인정보보호법 대응

#### M. 통계 고도화
- 현재 `/reports`에 기본 통계 있음
- 월별 추이 차트, 합격률, 비자 상태 분포 등

#### N. API 문서화 / 어드민 로그
- 관리자 액션 로그 (누가 언제 수정했는지)
- 감사 추적 (audit trail)

---

## 3. 추천 구현 순서

```
즉시 (1~2일)
  ├─ A. 포털 상담/성적 조회 탭
  ├─ B. 포털 비밀번호 변경
  └─ F. 포털 사진 업로드

단기 (1주)
  ├─ D. 포털 베트남어 (핵심 필드만 번역)
  ├─ C. 비자 만료 이메일 알림
  └─ E. 학생 대량 승인

중기 (추후)
  ├─ G. 유학원 전용 뷰 검토
  ├─ H. 학생 탈퇴 요청
  └─ M. 통계 고도화
```

---

## 4. 현재 시스템 완성도 평가

| 영역 | 완성도 | 비고 |
|------|--------|------|
| 관리자 기능 | 90% | 대량승인 미구현 |
| 학생 포털 | 60% | 상담/성적 조회, 다국어 미구현 |
| 보안/RLS | 95% | 감사 로그 없음 |
| 유학원 기능 | 70% | 전용 뷰 검토 필요 |
| 알림 시스템 | 10% | UI만 있고 이메일 없음 |
| 다국어 | 0% | 전체 한국어 |

**전체 완성도: 약 70%**
핵심 관리 기능은 완성, 학생 포털과 알림이 주요 미완성 영역
