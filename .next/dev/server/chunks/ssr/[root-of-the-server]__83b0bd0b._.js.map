{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/projects/aju-ej/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl  = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseKey  = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\nexport const supabase = createClient(supabaseUrl, supabaseKey)\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/projects/aju-ej/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { supabase } from '@/lib/supabase'\nimport type { UserMeta } from '@/lib/types'\nimport Link from 'next/link'\n\nexport default function DashboardPage() {\n  const router  = useRouter()\n  const [user, setUser]           = useState<UserMeta | null>(null)\n  const [stats, setStats]         = useState({ students: 0, agencies: 0, consultations: 0, exams: 0 })\n  const [loading, setLoading]     = useState(true)\n\n  useEffect(() => {\n    checkAuth()\n  }, [])\n\n  const checkAuth = async () => {\n    const { data: { session } } = await supabase.auth.getSession()\n    if (!session) {\n      router.push('/login')\n      return\n    }\n    setUser(session.user.user_metadata as UserMeta)\n    await loadStats()\n    setLoading(false)\n  }\n\n  const loadStats = async () => {\n    const [s, a, c, e] = await Promise.all([\n      supabase.from('students').select('id', { count: 'exact', head: true }).eq('is_active', true),\n      supabase.from('agencies').select('id', { count: 'exact', head: true }).eq('is_active', true),\n      supabase.from('consultations').select('id', { count: 'exact', head: true }),\n      supabase.from('exam_results').select('id', { count: 'exact', head: true }),\n    ])\n    setStats({\n      students:      s.count ?? 0,\n      agencies:      a.count ?? 0,\n      consultations: c.count ?? 0,\n      exams:         e.count ?? 0,\n    })\n  }\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut()\n    router.push('/login')\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <p className=\"text-slate-500\">로딩 중...</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-100\">\n      {/* 헤더 */}\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-9 h-9 bg-blue-600 rounded-xl flex items-center justify-center\">\n              <span className=\"text-white text-sm font-bold\">AE</span>\n            </div>\n            <span className=\"font-bold text-slate-800\">AJU E&J 학생관리</span>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <span className=\"text-sm text-slate-500\">{user?.name_kr} ({user?.role})</span>\n            <button\n              onClick={handleLogout}\n              className=\"text-sm text-slate-500 hover:text-red-500 transition-colors\"\n            >\n              로그아웃\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {/* 네비게이션 */}\n      <nav className=\"bg-white border-b border-slate-200\">\n        <div className=\"max-w-6xl mx-auto px-6\">\n          <div className=\"flex gap-6\">\n            <Link href=\"/\" className=\"py-3 text-sm font-medium text-blue-600 border-b-2 border-blue-600\">\n              대시보드\n            </Link>\n            <Link href=\"/students\" className=\"py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent hover:border-slate-300 transition-colors\">\n              학생 관리\n            </Link>\n            {user?.role === 'master' && (\n              <Link href=\"/agencies\" className=\"py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent hover:border-slate-300 transition-colors\">\n                유학원 관리\n              </Link>\n            )}\n          </div>\n        </div>\n      </nav>\n\n      {/* 메인 */}\n      <main className=\"max-w-6xl mx-auto px-6 py-8\">\n        <h2 className=\"text-xl font-bold text-slate-800 mb-6\">대시보드</h2>\n\n        {/* 통계 카드 */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8\">\n          <StatCard label=\"전체 학생\" value={stats.students} color=\"blue\" />\n          <StatCard label=\"유학원 수\" value={stats.agencies} color=\"emerald\" />\n          <StatCard label=\"상담 기록\" value={stats.consultations} color=\"violet\" />\n          <StatCard label=\"시험 기록\" value={stats.exams} color=\"amber\" />\n        </div>\n\n        {/* 바로가기 */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <QuickLink\n            href=\"/students\"\n            title=\"학생 목록 보기\"\n            desc=\"등록된 유학생 전체 목록을 조회합니다.\"\n            color=\"blue\"\n          />\n          <QuickLink\n            href=\"/students/new\"\n            title=\"학생 신규 등록\"\n            desc=\"새로운 베트남 유학생을 등록합니다.\"\n            color=\"emerald\"\n          />\n        </div>\n      </main>\n    </div>\n  )\n}\n\nfunction StatCard({ label, value, color }: { label: string; value: number; color: string }) {\n  const colors: Record<string, string> = {\n    blue:    'bg-blue-50 text-blue-700',\n    emerald: 'bg-emerald-50 text-emerald-700',\n    violet:  'bg-violet-50 text-violet-700',\n    amber:   'bg-amber-50 text-amber-700',\n  }\n  return (\n    <div className={`rounded-2xl p-5 ${colors[color]}`}>\n      <p className=\"text-sm font-medium opacity-70\">{label}</p>\n      <p className=\"text-3xl font-bold mt-1\">{value}</p>\n    </div>\n  )\n}\n\nfunction QuickLink({ href, title, desc, color }: { href: string; title: string; desc: string; color: string }) {\n  const colors: Record<string, string> = {\n    blue:    'hover:border-blue-400 hover:bg-blue-50',\n    emerald: 'hover:border-emerald-400 hover:bg-emerald-50',\n  }\n  return (\n    <Link\n      href={href}\n      className={`block bg-white rounded-2xl p-6 border-2 border-transparent transition-all ${colors[color]}`}\n    >\n      <h3 className=\"font-semibold text-slate-800 mb-1\">{title}</h3>\n      <p className=\"text-sm text-slate-500\">{desc}</p>\n    </Link>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}